Done:
    wp_custom image:
    - Kör alla scripts i /docker.entrypoint/ automatiskt.
    - Bygger en image med Apache, Wordpress, ldap-account-manager och phpLDAPadmin.
    - Skapar en $DOMAIN.conf fil och enablear den.
    Apache:
    - TLS on och redirectar till HTTPS på $DOMAIN.
    WP:
    - Genererar och kopplar till MySQL automatiskt via wp-conf.sh
    - Skapar första hemsidan och en admin-användare automatiskt.
    - Aktiverar authldap automatiskt.
    - Hämtar användare från ldap och sätter rollen INITIALT efter grupptillhörighet. (Efter authLdap config)
    MySQL:
    - Officiell Docker image.
    - Skapar en wordpress databas och användare via miljövariabler.
    - Skapar en LAM-config databas med docker-entrypoint-init.b
    OpenLDAP:
    - osixia/open_ldap image.
    - Sätter domänm admin-user och readonly-user med .env-fil.
    LAM:
    - Kopplar till MySQL och sparar config där.
    Docker-compose:
    - Bygger apache-imagen.
    - Lägger alla containrar på samma nätverk. Länkar containers via containernamn.
    - Mappar portar 80, 389, 443 och 3306.
    - Tar miljövariabler från en .env-fil
    - Secrets för lösenord.
    - Skapar namngedda volymer för viktiga folders.
    Scripts:
    - Backup-script av LDAP och MySQL som krypterar databaserna, och skickar dom off-site. (Cronjob)
    - Script för att läsa in en krypterad LDAP-databas.
    - Backup-script av wordpress-foldern.
    Host:
    - OpenSSH-server med nyckelautentisering.

Todo:

Fixa:       Backa upp krypteringsnycklar och ssh-nycklar någonstans.

Fixa:       Interaktionen mellan apache_setup, wp_setup, unpacking wp.tar.gz och mounta wordpress i docker-compose.

Kolla:      Lägg till grejer i wordpress. Kör alla backups, starta en ny miljö och restorea allt. Funkar?

Kolla:      Om backup-scriptsen kräver tillgång till saker i root-foldern. Isätllet för att kolla i script och köra om \
            bara chowna scripten till root? Eller sätt setuid/setgid till root? Vad är best practice?

Problem:    Överallt...var man än vänder sig så är det något som är trasigt.

Problem:    https://github.com/nextcloud/server/issues/2640
            Konverterar man en csv med användare så har dom har ett gidNumber, det är deras primary group.
            Men om användarna inte är med i memberUid i grupperna själva så har dom en primary group men är inte medlemmar i den.
            authLdap letar efter grupptillhörighet i memberUid, så man måste manuellt gå in och lägga till användare i grupper.
            Hade jag kunnat php så hade jag kunnat skriva om authLdap i wordpress plugin file editor att kolla en användares gid istället.

Problem:    Lösenord står i klartext på diverse ställen. config.cfg för LAM. authLdap settings. Backup-scripts.

Problem:    Exporterar man LDAP-databasen med readonly-användaren så får man inte med lösenord. Men på nått sätt
            så kan den läsa dom i authLdap.

Problem:    LAM kan inte hitta en användare att logga in med om man sätter LDAP Search istället för en Fixed List. 
            Även om man söker med samma sträng.

Problem:    Egen dockerfile hanterar inte uppdateringar. Ändras variabler så kan script breaka.

Problem:    TLS fungerar inte i openldap containern. Mountar cert foldern på rätt plats men TLS-cert hittas inte.

Problem:    py_import kan inte importera en exporterad db. objectClasses är i fel ordning eller missing.

Problem?:   wp-config.php har lösenordet till wordpress databasen, den är world readable i docker-volymen.
            (Men, om man har fysisk tillgång att komma åt den filen...då är man redan inne.)

Kolla upp sftp reget/reput
Kryptera openldap och mysql uppkopplingar.
lam mysql config pass ligger öppet i config.cfg filen.
Apache imagen kollar inte längre efter senaste wordpress iom att build.sh inte körs längre.
Hårdkoda inte LAM master password i config.cfg och LAM mysql-databasen.
authldap ska hämta roll från primary group fältet.(gidNumber)
Apache server config
Containers kör som root...
Subdomäner
IP-tables för att droppa trafik som inte kommer mellan containers.
Fail2Ban på apache, ssh. (iptables för mysql och openldap?)
Let's encrypt
övervakning
hasha lösenord i filer?
Vad gör config-databasen i ldap?

Härda ssh:
- Stäng av root login.
- Stäng av X11 forwarding.
- Stäng av password authentication.
- Byt port (security by obscurity).
- Sätt på nyckelautentisering.

Remote backup:
- Användare på remote-servern som bara har hand om backuper.
- Är chrootad till backup-foldern.
- /bin/false shell och ingen home.
    - Det här förutsätter sftp, men sftp är allegedly långsamt vs rsync.

Vad finns inte backup på:
- lösenordsfiler/krypteringsnycklar/ssh-nycklar.
- SSH-server config.
- Apache-config.
- (Vad är ens önskvärt att ha backup på? Har man databaserna så kan man ju bygga upp nya system runt dom.)